(this["webpackJsonpfrontend-app"]=this["webpackJsonpfrontend-app"]||[]).push([[0],{40:function(t,e,a){t.exports=a(75)},45:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){},75:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(13),c=a.n(i),s=(a(45),a(46),a(47),a(5)),r=a(6),l=a(8),h=a(7),d=a(9),u=a(76),m=a(15),f=(a(48),a(49),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).props=void 0,a.img=void 0,a.PUBLIC_URL="/diagnal-frontendapp",a}return Object(d.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this;return n.createElement("div",{className:"ml-30 mb-90"},n.createElement("img",{className:"w-full",alt:"back",src:this.PUBLIC_URL+"/images/"+this.props.data["poster-image"],ref:function(e){return t.img=e},onError:function(e){return t.img.src=t.PUBLIC_URL+"/images/placeholder_for_missing_posters.png"}}),n.createElement("p",{className:"text-left font-light text-white tx-36"},this.props.data.name))}}]),e}(n.Component));var g=a(16),p=a(22),v=a.n(p),b={searchDetailsActionFn:function(t){return{type:"SEARCH_DETAILS",payload:t}}},E=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,t))).state=void 0,a.props=void 0,a.PUBLIC_URL="/diagnal-frontendapp",a.searchTimer=void 0,a.searchKeyword=void 0,a.state={enableSearch:!1,dataLoading:!1,dataEnd:!1,content:[]},a.handleScroll=a.handleScroll.bind(Object(m.a)(a)),a}return Object(d.a)(e,t),Object(r.a)(e,[{key:"componentWillMount",value:function(){this.fetchData(0,20),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(t){this.searchKeyword&&(t.searchDetailsActionData.length>0?this.setState({content:t.searchDetailsActionData}):(this.initializeParams(),this.searchContent(this.searchKeyword)))}},{key:"handleScroll",value:function(){if(!this.searchKeyword||null==this.searchKeyword){var t="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,e=document.body,a=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight);t+window.pageYOffset>=(n-=.3*n)&&this.fetchData(this.state.content.length,20)}}},{key:"initializeParams",value:function(){this.state.dataEnd=!1,this.state.dataLoading=!1,this.setState({dataEnd:this.state.dataEnd,content:[],dataLoading:!1})}},{key:"fetchData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.state.dataLoading||!0===this.state.dataEnd||(this.state.dataLoading=!0,this.setState({dataLoading:!0}),v.a.post("https://8khtgago2g.execute-api.ap-south-1.amazonaws.com/dev/fetchContents",{offset:e,limit:a}).then((function(e){if(t.setState({dataLoading:!1}),e&&e.data&&e.data.length>0){var a=t.state.content.concat(e.data);t.setState({content:a})}else t.setState({dataEnd:!0})})).catch((function(t){console.log("error",t)})))}},{key:"searchContent",value:function(t){var e=this;this.state.dataLoading||(this.state.dataLoading=!0,this.setState({dataLoading:!0,content:[]}),v.a.post("https://8khtgago2g.execute-api.ap-south-1.amazonaws.com/dev/searchContents",{keyword:t}).then((function(t){e.setState({dataLoading:!1}),t&&t.data&&t.data.length>0?e.setState({content:t.data}):e.setState({dataEnd:!0})})).catch((function(t){console.log("error",t)})))}},{key:"toggleSearch",value:function(){var t=!this.state.enableSearch;this.setState({enableSearch:t})}},{key:"inputChange",value:function(t){var e=this;this.searchKeyword=t.target.value,clearTimeout(this.searchTimer),this.searchKeyword&&""!==this.searchKeyword?this.searchTimer=setTimeout((function(){e.props.searchDetailsActionFn({keyword:e.searchKeyword,content:e.state.content})}),300):(this.initializeParams(),this.fetchData(0,20))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var t=this;return n.createElement("div",{className:"container mx-auto"},n.createElement("div",{className:"container mx-auto fixed bg-black header-box"},n.createElement("div",{className:"float-left mt-24 ml-30"},n.createElement("img",{className:"cursor-pointer float-left  h-8",alt:"back",src:this.PUBLIC_URL+"/images/Back.png"}),n.createElement("span",{className:" pl-4 leading-8 text-white font-bold"},"Romantic Comedy")),n.createElement("div",{className:"float-right mt-24 mr-30"},this.state.enableSearch&&n.createElement("input",{onChange:function(e){return t.inputChange(e)},className:"float-left h-8 w-32",type:"text",placeholder:"Search..."}),n.createElement("img",{onClick:function(e){return t.toggleSearch()},alt:"search",className:"cursor-pointer pl-4 float-left h-8",src:this.PUBLIC_URL+"/images/search.png"}))),n.createElement("div",{className:"container mx-auto mt-192 mb-30 contentbox float-left bg-black"},(this.state.content.length>0||!this.state.dataLoading)&&n.createElement("div",{className:"grid grid-cols-3 mt-30 pr-30"},this.state.content.map((function(t,e){return n.createElement(f,{key:e,data:t})}))),0===this.state.content.length&&this.state.dataLoading&&n.createElement("div",{className:"text-center text-white font-bold"},"Loading Contents"),this.state.content.length>0&&this.state.dataLoading&&n.createElement("div",{className:"text-center text-white font-bold"},"Loading More Contents"),0===this.state.content.length&&!this.state.dataLoading&&n.createElement("div",{className:"text-center text-white font-bold"},"No Matching Contents Found")))}}]),e}(n.Component),w=Object(g.b)((function(t){return{searchDetailsActionData:t.searchDetails}}),b)(E),y=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return n.createElement("div",null,"Page Not Found")}}]),e}(n.Component),L=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return n.createElement(u.c,null,n.createElement(u.a,{path:"/diagnal-frontendapp",component:w,exact:!0}),n.createElement(u.a,{path:"*",component:y}))}}]),e}(n.Component);var k=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(37),C=a.n(S),O=a(17),j=a(38);var x=C()(),N=Object(O.b)((function(t,e){if("SEARCH_DETAILS"===e.type){var a=e.payload.content.filter((function(t){return t.name.toLowerCase().includes(e.payload.keyword.toLowerCase())}));return Object(j.a)({},t,{searchDetails:a})}return t}),{searchDetails:[]});c.a.render(o.a.createElement(g.a,{store:N},o.a.createElement(u.b,{history:x},o.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d89d19db.chunk.js.map